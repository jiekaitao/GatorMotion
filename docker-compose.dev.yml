services:
  nextjs:
    build:
      context: ./web
      dockerfile: Dockerfile.dev
    volumes:
      - ./web/src:/app/src
      - ./web/public:/app/public
    environment:
      - WATCHPACK_POLLING=true

  cv-api:
    ports:
      - "8000:8000"
    volumes:
      - ./cv_backend/main.py:/app/main.py
      - ./cv_backend/rep_counter.py:/app/rep_counter.py
      - ./cv_backend/coach_engine.py:/app/coach_engine.py
      - ./cv_backend/train_reference.py:/app/train_reference.py
      - ./cv_backend/pt_coach:/app/pt_coach
      - ./cv_backend/models:/app/models
      - ./web/public/skeleton_data:/app/skeleton_data
